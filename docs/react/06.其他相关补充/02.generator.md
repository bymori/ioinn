---
title: generator
date: 2021-12-16 16:06:36
permalink: /pages/a51684/
categories:
  - react
  - 其他相关补充
tags:
  - generator
---

saga中间件使用了ES6的generator语法，简单了解一下

- 注意：它的用法非常的灵活，大家可以自行去学习一下。-文章- 待完成

按照如下步骤演示一下生成器的使用过程：

- 在JavaScript中编写一个普通的函数，进行调用会立即拿到这个函数的返回结果。
- 如果我们将这个函数编写成一个生成器函数。
- 调用iterator的next函数，会销毁一次迭代器，并且返回一个yield的结果。
- 研究一下foo生成器函数代码的执行顺序
- generator和promise一起使用。

```js
// generator: 生成器
// 1.普通函数
  function foo() {
    console.log('foo被执行');
  }

  foo();

// 2.生成器函数的定义
// 生成器函数
  function* foo() {
    console.log('111');
    yield 'Hello';
    console.log('222');
    yield 'World';
    console.log('333');
    yield 'momo';
    console.log('444');
  }

// iterator: 迭代器
  const result = foo();
  console.log(result);

// 3.使用迭代器
// 调用一次next, 就会消耗一次迭代器
  const res1 = result.next();
  console.log(res1);
  const res2 = result.next();
  console.log(res2);
  const res3 = result.next();
  console.log(res3);
  const res4 = result.next();
  console.log(res4);

// 4.生成器函数中代码的执行顺序
// 5.练习: 定义一个生成器函数, 依次可以生成1~10的数字
  function* generateNumber() {
    for (var i = 1; i <= 10; i++) {
      yield i;
    }
  }

  const numIt = generateNumber();
  console.log(numIt.next().value);
  console.log(numIt.next().value);

// 6.generator和Promise一起来使用
  function* bar() {
    console.log('1111');
    const result = yield new Promise((resolve, reject) => {
      setTimeout(() => {
        resolve('Hello Generator');
      }, 500);
    });
    console.log(result);
  }
  
  const it = bar();
  it.next().value.then((res) => {
    it.next(res);
  });
```