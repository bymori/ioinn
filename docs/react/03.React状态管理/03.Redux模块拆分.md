---
title: Redux模块拆分
date: 2021-12-15 22:59:12
permalink: /pages/f5c94f/
categories:
  - react
  - React状态管理
tags:
  - 
---
## Redux结构划分

如果我们将所有的逻辑代码写到一起，那么当redux变得复杂时代码就**难以维护**

接下来，对代码进行拆分，将`store`、`reducer`、`action`、`constants`拆分成一个个文件
<!-- more -->
- 创建`store/index.js`文件
- 创建`store/reducer.js`文件
- 创建`store/actionCreators.js`文件
- 创建`store/constants.js`文件

**注意**：node中对ES6模块化的支持

从node v13.2.0开始，node才对ES6模块化提供了支持：

- node v13.2.0之前，需要进行如下操作
  - 在package.json中添加属性： `"type": "module"`
  - 在执行命令中添加如下选项：`node --experimental-modules src/index.js`
- node v13.2.0之后，只需要进行如下操作
  - 在package.json中添加属性： `"type": "module"`
  - 注意：导入文件时，需要跟上`.js`后缀名

```json
{
  ...
  "type": "module",
  "scripts": {
    "start": "node index.js",
    "start2": "node --experimental-modules index.js"
  }
}
```

## Redux使用流程

### Redux官方 数据流程图

![ReduxDataFlowDiagram](https://cdn.jsdelivr.net/gh/bymori/image-PicX/typora/ReduxDataFlowDiagram-49fa8c3968371d9ef6f2a1486bd40a26.gif)

图源来自：[https://redux.js.org/tutorials/fundamentals/part-1-overview#data-flow](https://redux.js.org/tutorials/fundamentals/part-1-overview#data-flow)

## redux融入react代码

