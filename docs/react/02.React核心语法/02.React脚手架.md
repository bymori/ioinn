---
title: React脚手架
date: 2021-12-13 12:00:43
permalink: /pages/baac36/
categories:
  - react
  - React核心语法
tags:
  - 
---
## 脚手架是什么

- 编程中提到的脚手架（Scaffold），其实是一种工具，帮我们可以快速生成项目的工程化结构；
  - 每个项目作出完成的效果不同，但是它们的基本工程化结构是相似的；
  - 既然相似，就没有必要每次都从零开始搭建，完全可以使用一些工具，帮助我们生产基本的工程化模板；
  - 不同的项目，在这个模板的基础之上进行项目开发或者进行一些配置的简单修改即可；
  - 这样也可以间接保证项目的基本机构一致性，方便后期的维护；
- 总结：脚手架让项目从搭建到开发，再到部署，整个流程变得快速和便捷
<!-- more -->

## 前端脚手架

对于现在比较流行的三大框架都有属于自己的脚手架：

- Vue的脚手架：vue-cli
- Angular的脚手架：angular-cli
- React的脚手架：create-react-app

它们的作用都是帮助我们生成一个通用的目录结构，并且已经将我们所需的工程环境配置好。

使用这些脚手架需要依赖什么呢？

- 目前这些脚手架都是使用node编写的，并且都是基于webpack的；
- 所以我们必须在自己的电脑上安装node环境

## 安装node

官网地址：https://nodejs.org/en/download

## 安装脚手架

需要安装的是创建React项目的脚手架 create-react-app

```shell
npm install -g create-react-app
```

### 创建React项目

现在，我们就可以通过脚手架来创建React项目了。

- 创建React项目的命令如下：
  - 注意：项目名称不能包含大写字母
  - 另外还有更多创建项目的方式，可以参考GitHub的[readme](https://create-react-app.dev/docs/getting-started#selecting-a-template)
  - `create-react-app 项目名称`
- 创建完成后，进入对应的目录，就可以将项目跑起来：

```shell
cd 01-test-react
yarn start
```

## 目录结构分析

```js
01-test-react
├─ .gitignore // git忽略文件
├─ package.json // 对整个应用程序的描述:包括应用名称，版本号，依赖包，以及项目的启动，打包等
├─ README.md // 自述文件
├─ public
│   ├─ favicon.ico // 应用程序顶部的icon图标
│   ├─ index.html // 应用的index.html入口文件
│   ├─ logo192.png // 在manifest.json中使用
│   ├─ logo512.png // 在manifest.json中使用
│   ├─ manifest.json // 和web app配置相关
│   └─ robots.txt // 指定搜索引擎可以或者无法爬取那些文件
├─ src
│   ├─ App.css // App组件相关的样式
│   ├─ App.js // App组件的代码文件
│   ├─ App.test.js // App组件的测试代码文件
│   ├─ index.css // 全局的样式文件
│   ├─ index.js // 整个应用程序的入口文件
│   ├─ logo.svg // 刚才启动项目，所程序的React图标
│   ├─ reportWebVitals.js // 默认帮助我们写好的注册PWA相关的代码
│   └─ setupTests.js // 测试初始化文件
└─ yarn.lock // 用于lock file模块的版本号
```

## webpack是什么

webpack 是一个现代 JavaScript 应用程序的静态模块打包器(module bundler)；

当 webpack 处理应用程序时，它会递归地构建一个依赖关系图(dependency graph)，其中包含应用程序需要的每个模块，然后将所有这些模块打包成一个或多个 bundle；

![webpack是什么](https://cdn.jsdelivr.net/gh/bymori/image-PicX@main/img/fwf19hejbs-1639378425328.png)

### 脚手架中的webpack

webpack里面的内容是非常多的 但是 我们并没有在目录结构中看到任何webpack相关的内容

原因是React脚手架讲webpack相关的配置隐藏起来了（其实从Vue CLI3开始，也是进行了隐藏）

- 如果我们希望看到webpack的配置信息，应该怎么来做呢？
- 我们可以执行一个package.json文件中的一个脚本："eject": "react-scripts eject"
- 这个操作是不可逆的，所以在执行过程中会给与我们提示 `yarn eject`

## 开始编写代码

通过脚手架创建完项目，会感觉目录结构过于复杂 我们先将不需要的文件统统删掉：

1. 将src下的所有文件都删除
2. 将public文件下出列favicon.ico和index.html之外的文件都删除掉

在src目录下，创建一个index.js文件，因为这是webpack打包的入口

在index.js中开始编写React代码：

- 我们会发现和写的代码是逻辑是一致的；
- 只是在模块化开发中，我们需要手动的来导入React、ReactDOM，因为它们都是在我们安装的模块中

```js
// index.js
import React from 'react';
import ReactDOM from 'react-dom';

import App from './App';

ReactDOM.render(<App />, document.getElementById('root'));
```

如果不希望直接在 `ReactDOM.render` 中编写过多的代码，就可以单独抽取一个组件App.js

```js
// App.js
// import React from 'react';
// const { Component } = React;
import React, { Component } from 'react';

export default class App extends Component {
  constructor() {
    super();

    this.state = {
      counter: 0,
    };
  }

  render() {
    return (
      <div>
        <h2>当前计数: {this.state.counter}</h2>
        <button>+</button>
        <button>-</button>
      </div>
    );
  }
}
```
