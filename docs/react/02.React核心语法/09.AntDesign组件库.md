---
title: AntDesign组件库
date: 2021-12-14 22:11:09
permalink: /pages/a4cf34/
categories:
  - react
  - React核心语法
tags:
  - antd
  - AntDesign
  - 组件库
---

## AntDesign的介绍

- AntDesign ，简称 `antd` 是基于 Ant Design 设计体系的 React UI 组件库，主要用于研发企业级中后台产品。
  - 中后台的产品 属于工具性产品，很多优秀的设计团队通过自身的探索和积累，形成了自己的设计体系。

<!-- more -->

### ✨ 特性

- 🌈 提炼自企业级中后台产品的交互语言和视觉风格。
- 📦 开箱即用的高质量 React 组件。
- 🛡 使用 TypeScript 开发，提供完整的类型定义文件。
- ⚙️ 全链路开发和设计工具体系。
  - 从**业务战略**—**用户场景**—**设计目标**—**交互体验**—**用户流程**—**预期效率**全方面进行分析和考虑
- 🌍 数十个国际化语言支持。
- 🎨 深入每个细节的主题定制能力。

### 兼容环境

- 现代浏览器和 IE11（需要 [polyfills](https://ant.design/docs/react/getting-started-cn#%E5%85%BC%E5%AE%B9%E6%80%A7)）。
- 支持服务端渲染。
- [Electron](https://www.electronjs.org/)

| [<img src="https://raw.githubusercontent.com/alrra/browser-logos/master/src/edge/edge_48x48.png" alt="IE / Edge" width="24px" height="24px" />](http://godban.github.io/browsers-support-badges/)<br/>IE / Edge | [<img src="https://raw.githubusercontent.com/alrra/browser-logos/master/src/firefox/firefox_48x48.png" alt="Firefox" width="24px" height="24px" />](http://godban.github.io/browsers-support-badges/)<br/>Firefox | [<img src="https://raw.githubusercontent.com/alrra/browser-logos/master/src/chrome/chrome_48x48.png" alt="Chrome" width="24px" height="24px" />](http://godban.github.io/browsers-support-badges/)<br/>Chrome | [<img src="https://raw.githubusercontent.com/alrra/browser-logos/master/src/safari/safari_48x48.png" alt="Safari" width="24px" height="24px" />](http://godban.github.io/browsers-support-badges/)<br/>Safari | [<img src="https://raw.githubusercontent.com/alrra/browser-logos/master/src/opera/opera_48x48.png" alt="Opera" width="24px" height="24px" />](http://godban.github.io/browsers-support-badges/)<br/>Opera | [<img src="https://raw.githubusercontent.com/alrra/browser-logos/master/src/electron/electron_48x48.png" alt="Electron" width="24px" height="24px" />](http://godban.github.io/browsers-support-badges/)<br/>Electron |
| --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| IE11, Edge                                                                                                                                                                                                      | last 2 versions                                                                                                                                                                                                   | last 2 versions                                                                                                                                                                                               | last 2 versions                                                                                                                                                                                               | last 2 versions                                                                                                                                                                                           | last 2 versions                                                                                                                                                                                                       |

对于 IE 系列浏览器，需要提供相应的 Polyfill 支持，建议使用 [@babel/preset-env](https://babeljs.io/docs/en/babel-preset-env) 来解决浏览器兼容问题。如果你在使用 [umi](https://umijs.org/)，可以直接使用 [targets](https://umijs.org/zh-CN/config#targets) 配置。

> antd@2.0 之后不再支持 IE8。 antd@4.0 之后不再支持 React 15 和 IE9/10。

稳定版：<a href="https://www.npmjs.org/package/antd" target="_blank"><img src="https://img.shields.io/npm/v/antd.svg?style=flat-square" alt="npm package"></a>

### 安装

- 使用 npm 或 yarn 安装

```shell
npm install antd --save
# OR
yarn add antd
```

- 需要在index.js中引入全局的Antd样式：

```js
import 'antd/dist/antd.css'; // or 'antd/dist/antd.less'
```

- 在App.js中就可以使用一些组件了

#### 按需加载

`antd` 的 JS 代码默认支持基于 ES modules 的 tree shaking。 对于 js 部分，直接引入 `import { Button } from 'antd'` 就会有按需加载的效果

### craco

- 像对主题等相关的高级特性进行配置，需要修改create-react-app 的默认配置。
- 如何修改create-react-app 的默认配置呢？
  - 可以通过yarn run eject来暴露出来对应的配置信息进行修改；
  - 但是不熟悉webpack的话，直接修改 CRA 的配置是否会给你的项目带来负担，甚至会增加项目的隐患和不稳定性呢？
  - 所以，在项目开发中是不建议直接去修改 CRA 的配置信息的；
- 那么如何来进行修改默认配置呢？社区目前有两个比较常见的方案：
- react-app-rewired + customize-cra；(这个是antd早期推荐的方案)
- craco；(目前antd推荐的方案)

#### Craco的使用步骤

- 第一步：安装craco：

```shell
yarn add @craco/craco
```

- 第二步：修改package.json文件
  - 原本启动时，我们是通过react-scripts来管理的；
  - 现在启动时，我们通过craco来管理

```json
/* package.json */
"scripts": {
-   "start": "react-scripts start",
-   "build": "react-scripts build",
-   "test": "react-scripts test",
+   "start": "craco start",
+   "build": "craco build",
+   "test": "craco test",
}
```

- 第三步：在根目录下创建craco.config.js文件用于修改默认配置

```js
/* craco.config.js */
module.exports = {
  // 配置文件...
};
```

#### 自定义主题

按照 [配置主题](https://ant.design/docs/react/customize-theme-cn) 的要求，自定义主题需要用到类似 [less-loader](https://github.com/webpack-contrib/less-loader/) 提供的 less 变量覆盖功能。我们可以引入 [craco-less](https://github.com/DocSpring/craco-less) 来帮助加载 less 样式和修改变量。

首先把 `src/App.css` 文件修改为 `src/App.less`，然后修改样式引用为 less 文件。

```js
/* src/App.js */
- import './App.css';
+ import './App.less';

/* src/App.less */
- @import '~antd/dist/antd.css';
+ @import '~antd/dist/antd.less';
```

然后安装 `craco-less` 并修改 `craco.config.js` 文件如下。

```shell
yarn add craco-less
```

```js
const CracoLessPlugin = require('craco-less');

module.exports = {
  plugins: [
    {
      plugin: CracoLessPlugin,
      options: {
        lessLoaderOptions: {
          lessOptions: {
            modifyVars: { '@primary-color': '#1DA57A' },
            javascriptEnabled: true,
          },
        },
      },
    },
  ],
};
```

这里利用了 [less-loader](https://github.com/webpack-contrib/less-loader#less-options) 的 modifyVars 来进行主题配置，变量和其他配置方式可以参考 [配置主题](https://ant.design/docs/react/customize-theme-cn) 文档。修改后重启 yarn start，如果看到一个绿色的按钮就说明配置成功了。

### 配置别名

- 在项目开发中，某些组件或者文件的层级会较深，
  - 如果我们通过上层目录去引入就会出现这样的情况：`../../../../components/button`；
  - 如果我们可以配置别名，就可以直接从根目录下面开始查找文件：`@/components/button`，甚至是：`components/button`；
- 配置别名也需要修改webpack的配置，当然我们也可以借助于 craco 来完成

```js
/* craco.config.js */
const CracoLessPlugin = require('craco-less');
const path = require('path');
const resolve = (dir) => path.resolve(__dirname, dir);

module.exports = {
  // ...
  webpack: {
    alias: {
      '@': resolve('src'),
      components: resolve('src/components'),
    },
  },
};
```

- 在导入时就可以按照下面的方式来使用了：

```js
import CommentInput from '@/components/CommentInput';
import CommentItem from 'components/CommentItem';
```

### 案例demo

- 待添加
