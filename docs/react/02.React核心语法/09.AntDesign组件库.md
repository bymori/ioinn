---
title: AntDesignç»„ä»¶åº“
date: 2021-12-14 22:11:09
permalink: /pages/a4cf34/
categories:
  - react
  - Reactæ ¸å¿ƒè¯­æ³•
tags:
  - antd
  - AntDesign
  - ç»„ä»¶åº“
---

## AntDesignçš„ä»‹ç»

- AntDesign ï¼Œç®€ç§° `antd` æ˜¯åŸºäº Ant Design è®¾è®¡ä½“ç³»çš„ React UI ç»„ä»¶åº“ï¼Œä¸»è¦ç”¨äºç ”å‘ä¼ä¸šçº§ä¸­åå°äº§å“ã€‚
  - ä¸­åå°çš„äº§å“ å±äºå·¥å…·æ€§äº§å“ï¼Œå¾ˆå¤šä¼˜ç§€çš„è®¾è®¡å›¢é˜Ÿé€šè¿‡è‡ªèº«çš„æ¢ç´¢å’Œç§¯ç´¯ï¼Œå½¢æˆäº†è‡ªå·±çš„è®¾è®¡ä½“ç³»ã€‚

<!-- more -->

### âœ¨ ç‰¹æ€§

- ğŸŒˆ æç‚¼è‡ªä¼ä¸šçº§ä¸­åå°äº§å“çš„äº¤äº’è¯­è¨€å’Œè§†è§‰é£æ ¼ã€‚
- ğŸ“¦ å¼€ç®±å³ç”¨çš„é«˜è´¨é‡ React ç»„ä»¶ã€‚
- ğŸ›¡ ä½¿ç”¨ TypeScript å¼€å‘ï¼Œæä¾›å®Œæ•´çš„ç±»å‹å®šä¹‰æ–‡ä»¶ã€‚
- âš™ï¸ å…¨é“¾è·¯å¼€å‘å’Œè®¾è®¡å·¥å…·ä½“ç³»ã€‚
  - ä»**ä¸šåŠ¡æˆ˜ç•¥**â€”**ç”¨æˆ·åœºæ™¯**â€”**è®¾è®¡ç›®æ ‡**â€”**äº¤äº’ä½“éªŒ**â€”**ç”¨æˆ·æµç¨‹**â€”**é¢„æœŸæ•ˆç‡**å…¨æ–¹é¢è¿›è¡Œåˆ†æå’Œè€ƒè™‘
- ğŸŒ æ•°åä¸ªå›½é™…åŒ–è¯­è¨€æ”¯æŒã€‚
- ğŸ¨ æ·±å…¥æ¯ä¸ªç»†èŠ‚çš„ä¸»é¢˜å®šåˆ¶èƒ½åŠ›ã€‚

### å…¼å®¹ç¯å¢ƒ

- ç°ä»£æµè§ˆå™¨å’Œ IE11ï¼ˆéœ€è¦ [polyfills](https://ant.design/docs/react/getting-started-cn#%E5%85%BC%E5%AE%B9%E6%80%A7)ï¼‰ã€‚
- æ”¯æŒæœåŠ¡ç«¯æ¸²æŸ“ã€‚
- [Electron](https://www.electronjs.org/)

| [<img src="https://raw.githubusercontent.com/alrra/browser-logos/master/src/edge/edge_48x48.png" alt="IE / Edge" width="24px" height="24px" />](http://godban.github.io/browsers-support-badges/)<br/>IE / Edge | [<img src="https://raw.githubusercontent.com/alrra/browser-logos/master/src/firefox/firefox_48x48.png" alt="Firefox" width="24px" height="24px" />](http://godban.github.io/browsers-support-badges/)<br/>Firefox | [<img src="https://raw.githubusercontent.com/alrra/browser-logos/master/src/chrome/chrome_48x48.png" alt="Chrome" width="24px" height="24px" />](http://godban.github.io/browsers-support-badges/)<br/>Chrome | [<img src="https://raw.githubusercontent.com/alrra/browser-logos/master/src/safari/safari_48x48.png" alt="Safari" width="24px" height="24px" />](http://godban.github.io/browsers-support-badges/)<br/>Safari | [<img src="https://raw.githubusercontent.com/alrra/browser-logos/master/src/opera/opera_48x48.png" alt="Opera" width="24px" height="24px" />](http://godban.github.io/browsers-support-badges/)<br/>Opera | [<img src="https://raw.githubusercontent.com/alrra/browser-logos/master/src/electron/electron_48x48.png" alt="Electron" width="24px" height="24px" />](http://godban.github.io/browsers-support-badges/)<br/>Electron |
| --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| IE11, Edge                                                                                                                                                                                                      | last 2 versions                                                                                                                                                                                                   | last 2 versions                                                                                                                                                                                               | last 2 versions                                                                                                                                                                                               | last 2 versions                                                                                                                                                                                           | last 2 versions                                                                                                                                                                                                       |

å¯¹äº IE ç³»åˆ—æµè§ˆå™¨ï¼Œéœ€è¦æä¾›ç›¸åº”çš„ Polyfill æ”¯æŒï¼Œå»ºè®®ä½¿ç”¨ [@babel/preset-env](https://babeljs.io/docs/en/babel-preset-env) æ¥è§£å†³æµè§ˆå™¨å…¼å®¹é—®é¢˜ã€‚å¦‚æœä½ åœ¨ä½¿ç”¨ [umi](https://umijs.org/)ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ [targets](https://umijs.org/zh-CN/config#targets) é…ç½®ã€‚

> antd@2.0 ä¹‹åä¸å†æ”¯æŒ IE8ã€‚ antd@4.0 ä¹‹åä¸å†æ”¯æŒ React 15 å’Œ IE9/10ã€‚

ç¨³å®šç‰ˆï¼š<a href="https://www.npmjs.org/package/antd" target="_blank"><img src="https://img.shields.io/npm/v/antd.svg?style=flat-square" alt="npm package"></a>

### å®‰è£…

- ä½¿ç”¨ npm æˆ– yarn å®‰è£…

```shell
npm install antd --save
# OR
yarn add antd
```

- éœ€è¦åœ¨index.jsä¸­å¼•å…¥å…¨å±€çš„Antdæ ·å¼ï¼š

```js
import 'antd/dist/antd.css'; // or 'antd/dist/antd.less'
```

- åœ¨App.jsä¸­å°±å¯ä»¥ä½¿ç”¨ä¸€äº›ç»„ä»¶äº†

#### æŒ‰éœ€åŠ è½½

`antd` çš„ JS ä»£ç é»˜è®¤æ”¯æŒåŸºäº ES modules çš„ tree shakingã€‚ å¯¹äº js éƒ¨åˆ†ï¼Œç›´æ¥å¼•å…¥ `import { Button } from 'antd'` å°±ä¼šæœ‰æŒ‰éœ€åŠ è½½çš„æ•ˆæœ

### craco

- åƒå¯¹ä¸»é¢˜ç­‰ç›¸å…³çš„é«˜çº§ç‰¹æ€§è¿›è¡Œé…ç½®ï¼Œéœ€è¦ä¿®æ”¹create-react-app çš„é»˜è®¤é…ç½®ã€‚
- å¦‚ä½•ä¿®æ”¹create-react-app çš„é»˜è®¤é…ç½®å‘¢ï¼Ÿ
  - å¯ä»¥é€šè¿‡yarn run ejectæ¥æš´éœ²å‡ºæ¥å¯¹åº”çš„é…ç½®ä¿¡æ¯è¿›è¡Œä¿®æ”¹ï¼›
  - ä½†æ˜¯ä¸ç†Ÿæ‚‰webpackçš„è¯ï¼Œç›´æ¥ä¿®æ”¹ CRA çš„é…ç½®æ˜¯å¦ä¼šç»™ä½ çš„é¡¹ç›®å¸¦æ¥è´Ÿæ‹…ï¼Œç”šè‡³ä¼šå¢åŠ é¡¹ç›®çš„éšæ‚£å’Œä¸ç¨³å®šæ€§å‘¢ï¼Ÿ
  - æ‰€ä»¥ï¼Œåœ¨é¡¹ç›®å¼€å‘ä¸­æ˜¯ä¸å»ºè®®ç›´æ¥å»ä¿®æ”¹ CRA çš„é…ç½®ä¿¡æ¯çš„ï¼›
- é‚£ä¹ˆå¦‚ä½•æ¥è¿›è¡Œä¿®æ”¹é»˜è®¤é…ç½®å‘¢ï¼Ÿç¤¾åŒºç›®å‰æœ‰ä¸¤ä¸ªæ¯”è¾ƒå¸¸è§çš„æ–¹æ¡ˆï¼š
- react-app-rewired + customize-craï¼›(è¿™ä¸ªæ˜¯antdæ—©æœŸæ¨èçš„æ–¹æ¡ˆ)
- cracoï¼›(ç›®å‰antdæ¨èçš„æ–¹æ¡ˆ)

#### Cracoçš„ä½¿ç”¨æ­¥éª¤

- ç¬¬ä¸€æ­¥ï¼šå®‰è£…cracoï¼š

```shell
yarn add @craco/craco
```

- ç¬¬äºŒæ­¥ï¼šä¿®æ”¹package.jsonæ–‡ä»¶
  - åŸæœ¬å¯åŠ¨æ—¶ï¼Œæˆ‘ä»¬æ˜¯é€šè¿‡react-scriptsæ¥ç®¡ç†çš„ï¼›
  - ç°åœ¨å¯åŠ¨æ—¶ï¼Œæˆ‘ä»¬é€šè¿‡cracoæ¥ç®¡ç†

```json
/* package.json */
"scripts": {
-   "start": "react-scripts start",
-   "build": "react-scripts build",
-   "test": "react-scripts test",
+   "start": "craco start",
+   "build": "craco build",
+   "test": "craco test",
}
```

- ç¬¬ä¸‰æ­¥ï¼šåœ¨æ ¹ç›®å½•ä¸‹åˆ›å»ºcraco.config.jsæ–‡ä»¶ç”¨äºä¿®æ”¹é»˜è®¤é…ç½®

```js
/* craco.config.js */
module.exports = {
  // é…ç½®æ–‡ä»¶...
};
```

#### è‡ªå®šä¹‰ä¸»é¢˜

æŒ‰ç…§ [é…ç½®ä¸»é¢˜](https://ant.design/docs/react/customize-theme-cn) çš„è¦æ±‚ï¼Œè‡ªå®šä¹‰ä¸»é¢˜éœ€è¦ç”¨åˆ°ç±»ä¼¼ [less-loader](https://github.com/webpack-contrib/less-loader/) æä¾›çš„ less å˜é‡è¦†ç›–åŠŸèƒ½ã€‚æˆ‘ä»¬å¯ä»¥å¼•å…¥ [craco-less](https://github.com/DocSpring/craco-less) æ¥å¸®åŠ©åŠ è½½ less æ ·å¼å’Œä¿®æ”¹å˜é‡ã€‚

é¦–å…ˆæŠŠ `src/App.css` æ–‡ä»¶ä¿®æ”¹ä¸º `src/App.less`ï¼Œç„¶åä¿®æ”¹æ ·å¼å¼•ç”¨ä¸º less æ–‡ä»¶ã€‚

```js
/* src/App.js */
- import './App.css';
+ import './App.less';

/* src/App.less */
- @import '~antd/dist/antd.css';
+ @import '~antd/dist/antd.less';
```

ç„¶åå®‰è£… `craco-less` å¹¶ä¿®æ”¹ `craco.config.js` æ–‡ä»¶å¦‚ä¸‹ã€‚

```shell
yarn add craco-less
```

```js
const CracoLessPlugin = require('craco-less');

module.exports = {
  plugins: [
    {
      plugin: CracoLessPlugin,
      options: {
        lessLoaderOptions: {
          lessOptions: {
            modifyVars: { '@primary-color': '#1DA57A' },
            javascriptEnabled: true,
          },
        },
      },
    },
  ],
};
```

è¿™é‡Œåˆ©ç”¨äº† [less-loader](https://github.com/webpack-contrib/less-loader#less-options) çš„ modifyVars æ¥è¿›è¡Œä¸»é¢˜é…ç½®ï¼Œå˜é‡å’Œå…¶ä»–é…ç½®æ–¹å¼å¯ä»¥å‚è€ƒ [é…ç½®ä¸»é¢˜](https://ant.design/docs/react/customize-theme-cn) æ–‡æ¡£ã€‚ä¿®æ”¹åé‡å¯ yarn startï¼Œå¦‚æœçœ‹åˆ°ä¸€ä¸ªç»¿è‰²çš„æŒ‰é’®å°±è¯´æ˜é…ç½®æˆåŠŸäº†ã€‚

### é…ç½®åˆ«å

- åœ¨é¡¹ç›®å¼€å‘ä¸­ï¼ŒæŸäº›ç»„ä»¶æˆ–è€…æ–‡ä»¶çš„å±‚çº§ä¼šè¾ƒæ·±ï¼Œ
  - å¦‚æœæˆ‘ä»¬é€šè¿‡ä¸Šå±‚ç›®å½•å»å¼•å…¥å°±ä¼šå‡ºç°è¿™æ ·çš„æƒ…å†µï¼š`../../../../components/button`ï¼›
  - å¦‚æœæˆ‘ä»¬å¯ä»¥é…ç½®åˆ«åï¼Œå°±å¯ä»¥ç›´æ¥ä»æ ¹ç›®å½•ä¸‹é¢å¼€å§‹æŸ¥æ‰¾æ–‡ä»¶ï¼š`@/components/button`ï¼Œç”šè‡³æ˜¯ï¼š`components/button`ï¼›
- é…ç½®åˆ«åä¹Ÿéœ€è¦ä¿®æ”¹webpackçš„é…ç½®ï¼Œå½“ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥å€ŸåŠ©äº craco æ¥å®Œæˆ

```js
/* craco.config.js */
const CracoLessPlugin = require('craco-less');
const path = require('path');
const resolve = (dir) => path.resolve(__dirname, dir);

module.exports = {
  // ...
  webpack: {
    alias: {
      '@': resolve('src'),
      components: resolve('src/components'),
    },
  },
};
```

- åœ¨å¯¼å…¥æ—¶å°±å¯ä»¥æŒ‰ç…§ä¸‹é¢çš„æ–¹å¼æ¥ä½¿ç”¨äº†ï¼š

```js
import CommentInput from '@/components/CommentInput';
import CommentItem from 'components/CommentItem';
```

### æ¡ˆä¾‹demo

- å¾…æ·»åŠ 
