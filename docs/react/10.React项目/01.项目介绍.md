---
title: 项目介绍
date: 2021-12-18 14:55:48
permalink: /pages/4d31f4/
categories:
  - react
  - React项目
tags:
  - 
---
## 项目介绍

网易云音乐web端项目：



### 项目规范：项目中有一些开发规范和代码风格

1. 文件夹、文件名称统一`小写`、多个单词以`连接符（-）连接`
2. JavaScript变量名称采用`小驼峰`标识，常量全部使用`大写字母`，组件采用`大驼峰`
3. CSS采用`普通CSS`和`styled-component`结合来编写（全局采用普通CSS、局部采用styled-component）
4. 整个项目不再使用class组件，统一使用`函数式组件`，并且全面拥抱Hooks
5. 所有的函数式组件，为了避免不必要的渲染，全部`使用memo进行包裹` (vscode利用插件 rmc快速生成)
6. 组件内部的状态，使用`useState`、`useReducer`  业务数据全部放在`redux中管理`
7. 函数组件内部基本按照如下顺序编写代码：
   1. 组件内部state管理
   2. redux的hooks代码
   3. 其他组件hooks代码
   4. 其他逻辑代码
   5. 返回JSX代码
8. redux代码规范如下：
   1. 每个模块有自己独立的reducer，通过combineReducer进行合并
   2. 异步请求代码使用redux-thunk，并且写在actionCreators中
   3. redux直接采用redux hooks方式编写，不再使用connect
9. 网络请求采用axios p 对axios进行二次封装
   1. 所有的模块请求会放到一个请求文件中单独管理
10. 项目使用AntDesign
    1. 项目中某些AntDesign中的组件会被拿过来使用



#### 项目目录结构

```js
// io-music-web-music
├─ .gitignore // git忽略文件
├─ package.json // 对整个应用程序的描述:包括应用名称，版本号，依赖包，以及项目的启动，打包等
├─ README.md // 自述文件
├─ public
│   ├─ favicon.ico // 应用程序顶部的icon图标
│   ╰─ index.html // 应用的index.html入口文件
├─ src
│   ├─ assets // 静态资源
│ 	     ├─ css // 层叠样式表
│ 		 ├─ font // 字体图标
│ 		 ╰─ img // 图片资源
│   ├─ common // 公共资源 常量
│   ├─ components // 公共组件
│   ├─ pages // 页面
│   ├─ router //路由
│   ├─ services // 网络服务
│   ├─ store // 数据
│   ├─ utils // 工具函数
│   ├─ App.js // App组件的代码文件
│   ╰─ index.js // 整个应用程序的入口文件
└─ yarn.lock // 用于lock file模块的版本号
```



建立完成项目目录结构后 开始正式编写代码

开始之前 需要使用 **[ normalize.css](https://github.com/necolas/normalize.css)** 重置css样式

**导入方式**

**NPM**

```shell
npm install --save normalize.css
# OR
yarn add normalize.css
```

**CDN**

See https://yarnpkg.com/en/package/normalize.css

**Download**

See https://necolas.github.io/normalize.css/latest/normalize.css



### reset.css

在 `assets/css`目录下创建`reset.css`文件  导入通过`npm`安装的  `normalize.css` 及自己的样式文件

```css
@import '~normalize.css';

/* 全局样式 */
body, textarea, select, input, button {
  font-size: 12px;
  color: #333;
  font-family: Arial, Helvetica, sans-serif;
  background-color: #f5f5f5;
}

.text-nowrap {
  white-space: nowrap;
  text-overflow: ellipsis;
  overflow: hidden;
}

.wrap-v1 {
  width: 1100px;
  margin: 0 auto;
}

.wrap-v2 {
  width: 980px;
  margin: 0 auto;
}

.sprite_01 {
  background: url(../img/sprite_01.png) no-repeat 0 9999px;
}

.sprite_02 {
  background: url(../img/sprite_02.png) no-repeat 0 9999px;
}

.sprite_covor {
  background: url(../img/sprite_cover.png) no-repeat 0 9999px;
}

.sprite_icon {
  background: url(../img/sprite_icon.png) no-repeat 0 9999px;
}

.sprite_icon2 {
  background: url(../img/sprite_icon2.png) no-repeat 0 9999px;
}

.sprite_button {
  background: url(../img/sprite_button.png) no-repeat 0 9999px;
}

.sprite_button2 {
  background: url(../img/sprite_button2.png) no-repeat 0 9999px;
}

.sprite_table {
  background: url(../img/sprite_table.png) no-repeat 0 9999px;
}

.image_cover {
  position: absolute;
  left: 0;
  right: 0;
  top: 0;
  bottom: 0;
  text-indent: -9999px;
  background: url(../img/sprite_cover.png) no-repeat -145px -57px;
}

.sprite_player {
  background: url(../img/playbar_sprite.png) no-repeat 0 9999px;
}
```



### 目录别名设置

在`Reac`t中 如果要修改`webpack`的配置需要`eject `这是危险的操作

如果不想暴露出来`webpack`的文件修改配置的话 则需要 `@craco/craco`

#### @craco/craco

( **C**reate **R**eact **A**pp **C**onfiguration **O**verride ) 对于`create-react-app`是一个易于理解的配置层

通过在应用程序的根目录中添加单个配置（例如）文件**并**自定义您的eslint，babel，postcss配置等等，无需使用"`eject`"即可获得`create-react-app`和`customization` 的所有好处`craco.config.js`

**安装 @craco/craco**

```shell
yarn add @craco/craco
# OR
npm install @craco/craco --save
```

**在根目录中创建一个craco配置文件** ：`craco.config.js`

```js
my-app
├── node_modules
├── craco.config.js
└── package.json
```

更新文件部分中的现有调用以使用CLI

```js
/* package.json */

"scripts": {
-   "start": "react-scripts start",
+   "start": "craco start",
-   "build": "react-scripts build",
+   "build": "craco build"
-   "test": "react-scripts test",
+   "test": "craco test"
}
```

**然后重新启动项目即可**

```shell
npm start

# Or build
npm run build
```



#### @craco/craco**相关配置** 

[Configuration](https://github.com/gsoft-inc/craco/blob/master/packages/craco/README.md#configuration)  

```js
const path = require('path');

const resolve = (dir) => path.resolve(__dirname, dir);

module.exports = {
    // 配置 webpack 别名 @  components
  webpack: {
    alias: {
      '@': resolve('src'),
      components: resolve('src/components'),
    },
  },
};
```



